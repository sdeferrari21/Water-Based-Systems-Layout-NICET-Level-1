<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NICET Level 1 Water-Based Systems Layout Practice Exam</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-4 max-w-4xl">
        <!-- Start Screen -->
        <div id="start-screen" class="bg-white p-6 rounded-lg shadow-lg">
            <h1 class="text-2xl font-bold mb-4">NICET Level 1 Water-Based Systems Layout Practice Exam</h1>
            <p class="mb-4">Welcome to the free practice exam for NICET Level 1 Water-Based Systems Layout, based on NFPA 13 (2022). This 50-question test simulates the real exam, requiring you to use your NFPA 13 codebook to find answers. Each question includes a code reference to help you learn from mistakes.</p>
            <p class="mb-4">Instructions:</p>
            <ul class="list-disc pl-6 mb-4">
                <li>Click "Start Quiz" to begin.</li>
                <li>Answer each question using your NFPA 13 (2022) codebook.</li>
                <li>Some questions include exhibits (diagrams/tables) viewable by clicking "Show Exhibit".</li>
                <li>Navigate using "Previous" and "Next" buttons.</li>
                <li>Click "Submit Quiz" on the last question to see your results.</li>
            </ul>
            <button id="start-quiz" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Start Quiz</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-xl font-semibold mb-4">Question <span id="question-number"></span> of 50</h2>
            <p id="question-text" class="mb-4"></p>
            <div id="exhibit" class="hidden mb-4">
                <img id="exhibit-image" src="" alt="Exhibit" class="max-w-full h-auto">
            </div>
            <button id="show-exhibit" class="hidden bg-gray-200 px-4 py-2 rounded mb-4 hover:bg-gray-300">Show Exhibit</button>
            <div id="options" class="space-y-2"></div>
            <div class="flex justify-between mt-6">
                <button id="prev-question" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Previous</button>
                <button id="next-question" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Next</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-xl font-semibold mb-4">Your Results</h2>
            <p id="score" class="mb-4"></p>
            <div id="results" class="space-y-4"></div>
            <button id="restart-quiz" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-4">Restart Quiz</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
                {
                    question: "What is the minimum clearance required below sprinklers in a standard spray upright or pendent sprinkler system, unless otherwise specified?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "18 inches",
                    explanation: "NFPA 13 (2022) requires a minimum clearance of 18 inches below sprinklers to ensure proper spray pattern distribution, unless specific exceptions apply.",
                    codeReference: "NFPA 13 (2022), Section 9.2.1.3.1",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable distance between sprinklers on branch lines for standard spray sprinklers in a light hazard occupancy?",
                    options: ["12 feet", "15 feet", "18 feet", "20 feet"],
                    correctAnswer: "15 feet",
                    explanation: "For light hazard occupancies, NFPA 13 (2022) allows a maximum spacing of 15 feet between sprinklers on branch lines to ensure adequate coverage.",
                    codeReference: "NFPA 13 (2022), Section 10.2.5.2.1",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a light hazard occupancy sprinkler layout. What is the minimum pipe size for a branch line serving four sprinklers?",
                    options: ["3/4 inch", "1 inch", "1-1/4 inches", "1-1/2 inches"],
                    correctAnswer: "1 inch",
                    explanation: "NFPA 13 (2022) specifies that branch lines serving four sprinklers in a light hazard occupancy must be at least 1 inch in diameter to meet hydraulic requirements.",
                    codeReference: "NFPA 13 (2022), Section 16.7.2.2",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Sprinkler+Layout"
                },
                {
                    question: "What type of sprinkler system is required for a building with a ceiling height exceeding 30 feet in an ordinary hazard occupancy?",
                    options: ["Wet pipe system", "Dry pipe system", "Deluge system", "Control mode specific application (CMSA) sprinklers"],
                    correctAnswer: "Control mode specific application (CMSA) sprinklers",
                    explanation: "For ceiling heights over 30 feet in ordinary hazard occupancies, NFPA 13 (2022) requires CMSA sprinklers to provide adequate fire control.",
                    codeReference: "NFPA 13 (2022), Section 12.1.4.2",
                    exhibit: null
                },
                {
                    question: "What is the purpose of a check valve in a wet pipe sprinkler system?",
                    options: ["To prevent water flow to sprinklers", "To maintain system pressure", "To prevent backflow from the system to the water supply", "To regulate water temperature"],
                    correctAnswer: "To prevent backflow from the system to the water supply",
                    explanation: "A check valve in a wet pipe system prevents backflow, ensuring the water supply remains uncontaminated and system integrity is maintained.",
                    codeReference: "NFPA 13 (2022), Section 8.1.2.3",
                    exhibit: null
                },
                {
                    question: "What is the minimum water supply duration for a hydraulically calculated sprinkler system in a light hazard occupancy?",
                    options: ["15 minutes", "30 minutes", "60 minutes", "90 minutes"],
                    correctAnswer: "30 minutes",
                    explanation: "NFPA 13 (2022) requires a minimum water supply duration of 30 minutes for light hazard occupancies in hydraulically calculated systems.",
                    codeReference: "NFPA 13 (2022), Section 19.3.3.2.1",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a water supply curve. What is the minimum static pressure required at the fire department connection?",
                    options: ["100 psi", "125 psi", "150 psi", "175 psi"],
                    correctAnswer: "150 psi",
                    explanation: "NFPA 13 (2022) requires a minimum static pressure of 150 psi at the fire department connection to ensure adequate water supply support.",
                    codeReference: "NFPA 13 (2022), Section 8.17.2.4.2",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Water+Supply+Curve"
                },
                {
                    question: "What is the maximum allowable hanger spacing for 2-inch steel pipe in a sprinkler system?",
                    options: ["10 feet", "12 feet", "15 feet", "20 feet"],
                    correctAnswer: "15 feet",
                    explanation: "NFPA 13 (2022) allows a maximum hanger spacing of 15 feet for 2-inch steel pipe to ensure structural support.",
                    codeReference: "NFPA 13 (2022), Section 17.4.2.1",
                    exhibit: null
                },
                {
                    question: "What is the required color coding for sprinkler heads with a nominal temperature rating of 135-170°F?",
                    options: ["Orange", "Red", "Yellow", "Green"],
                    correctAnswer: "Orange",
                    explanation: "NFPA 13 (2022) specifies that sprinkler heads with a temperature rating of 135-170°F must be color-coded orange for identification.",
                    codeReference: "NFPA 13 (2022), Section 7.2.4.3",
                    exhibit: null
                },
                {
                    question: "What is the minimum distance from a wall for a sidewall sprinkler in a light hazard occupancy?",
                    options: ["4 inches", "6 inches", "8 inches", "12 inches"],
                    correctAnswer: "4 inches",
                    explanation: "NFPA 13 (2022) requires sidewall sprinklers to be installed at least 4 inches from walls to ensure proper spray pattern in light hazard occupancies.",
                    codeReference: "NFPA 13 (2022), Section 10.3.4.1.1",
                    exhibit: null
                },
                {
                    question: "What is the maximum coverage area per sprinkler for standard spray sprinklers in a light hazard occupancy?",
                    options: ["130 sq ft", "200 sq ft", "225 sq ft", "250 sq ft"],
                    correctAnswer: "225 sq ft",
                    explanation: "NFPA 13 (2022) allows a maximum coverage area of 225 square feet per sprinkler in light hazard occupancies for standard spray sprinklers.",
                    codeReference: "NFPA 13 (2022), Section 10.2.4.2.1",
                    exhibit: null
                },
                {
                    question: "What is the minimum diameter for underground piping supplying a fire sprinkler system?",
                    options: ["4 inches", "6 inches", "8 inches", "10 inches"],
                    correctAnswer: "6 inches",
                    explanation: "NFPA 13 (2022) requires underground piping supplying sprinkler systems to be at least 6 inches in diameter to ensure adequate flow.",
                    codeReference: "NFPA 13 (2022), Section 10.6.2.1",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a sprinkler system layout. What is the maximum distance from the end sprinkler to the wall in a light hazard occupancy?",
                    options: ["4 feet", "6 feet", "7.5 feet", "9 feet"],
                    correctAnswer: "7.5 feet",
                    explanation: "NFPA 13 (2022) specifies that the maximum distance from an end sprinkler to a wall in a light hazard occupancy is half the allowable spacing, which is 7.5 feet for a 15-foot spacing.",
                    codeReference: "NFPA 13 (2022), Section 10.2.5.2.2",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Sprinkler+Layout+Wall"
                },
                {
                    question: "What is the purpose of an alarm check valve in a wet pipe sprinkler system?",
                    options: ["To prevent water hammer", "To initiate an alarm when water flows", "To regulate water pressure", "To isolate the system for maintenance"],
                    correctAnswer: "To initiate an alarm when water flows",
                    explanation: "An alarm check valve triggers an alarm when water flows through the system, indicating sprinkler activation.",
                    codeReference: "NFPA 13 (2022), Section 8.17.1.1",
                    exhibit: null
                },
                {
                    question: "What is the minimum slope for underground piping to ensure drainage?",
                    options: ["1/8 inch per foot", "1/4 inch per foot", "1/2 inch per foot", "1 inch per foot"],
                    correctAnswer: "1/2 inch per foot",
                    explanation: "NFPA 13 (2022) requires a minimum slope of 1/2 inch per foot for underground piping to ensure proper drainage and prevent water accumulation.",
                    codeReference: "NFPA 13 (2022), Section 10.6.5.1",
                    exhibit: null
                },
                {
                    question: "What is the required temperature rating for sprinklers in a dry pipe system exposed to freezing conditions?",
                    options: ["135-170°F", "175-225°F", "250-300°F", "Above 300°F"],
                    correctAnswer: "175-225°F",
                    explanation: "Sprinklers in dry pipe systems exposed to freezing conditions must have a temperature rating of 175-225°F to prevent premature activation due to temperature fluctuations.",
                    codeReference: "NFPA 13 (2022), Section 7.2.4.2",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable distance between hangers for 1-inch steel pipe in a sprinkler system?",
                    options: ["7 feet", "10 feet", "12 feet", "15 feet"],
                    correctAnswer: "12 feet",
                    explanation: "NFPA 13 (2022) allows a maximum hanger spacing of 12 feet for 1-inch steel pipe to ensure structural integrity.",
                    codeReference: "NFPA 13 (2022), Section 17.4.2.1",
                    exhibit: null
                },
                {
                    question: "What is the minimum number of spare sprinklers required for a system with 300 sprinklers of the same type?",
                    options: ["3", "6", "12", "18"],
                    correctAnswer: "6",
                    explanation: "NFPA 13 (2022) requires at least 6 spare sprinklers for systems with fewer than 300 sprinklers of the same type and temperature rating.",
                    codeReference: "NFPA 13 (2022), Section 7.5.2.1",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a ceiling plan. What is the maximum distance from a sprinkler to a ceiling obstruction greater than 4 feet wide?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "36 inches",
                    explanation: "NFPA 13 (2022) requires sprinklers to be at least 36 inches from ceiling obstructions wider than 4 feet to avoid interference with the spray pattern.",
                    codeReference: "NFPA 13 (2022), Section 9.2.2.2",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Ceiling+Plan"
                },
                {
                    question: "What is the minimum depth of cover for underground piping in areas subject to vehicular traffic?",
                    options: ["2 feet", "3 feet", "4 feet", "5 feet"],
                    correctAnswer: "3 feet",
                    explanation: "NFPA 13 (2022) requires a minimum depth of cover of 3 feet for underground piping in areas with vehicular traffic to protect against damage.",
                    codeReference: "NFPA 13 (2022), Section 10.4.3.2",
                    exhibit: null
                },
                {
                    question: "What is the required pressure rating for a fire department connection?",
                    options: ["100 psi", "150 psi", "175 psi", "200 psi"],
                    correctAnswer: "175 psi",
                    explanation: "NFPA 13 (2022) requires fire department connections to be rated for a minimum pressure of 175 psi to handle fire department pumper pressures.",
                    codeReference: "NFPA 13 (2022), Section 8.17.2.4.1",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable deflection angle for underground piping fittings without thrust blocks?",
                    options: ["5 degrees", "10 degrees", "15 degrees", "20 degrees"],
                    correctAnswer: "5 degrees",
                    explanation: "NFPA 13 (2022) limits the deflection angle to 5 degrees for underground piping fittings without thrust blocks to prevent joint separation.",
                    codeReference: "NFPA 13 (2022), Section 10.8.2.2",
                    exhibit: null
                },
                {
                    question: "What is the purpose of a test connection in a sprinkler system?",
                    options: ["To drain the system", "To test water flow and alarm operation", "To flush debris from the system", "To measure system pressure"],
                    correctAnswer: "To test water flow and alarm operation",
                    explanation: "A test connection is used to simulate sprinkler activation, testing water flow and ensuring alarms function correctly.",
                    codeReference: "NFPA 13 (2022), Section 8.17.4.1",
                    exhibit: null
                },
                {
                    question: "What is the minimum size for a fire department connection inlet?",
                    options: ["2 inches", "2.5 inches", "3 inches", "4 inches"],
                    correctAnswer: "2.5 inches",
                    explanation: "NFPA 13 (2022) requires fire department connection inlets to be at least 2.5 inches to accommodate standard fire hose connections.",
                    codeReference: "NFPA 13 (2022), Section 8.17.2.3",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a sprinkler layout. What is the minimum distance between sprinklers and a continuous obstruction less than 4 feet wide?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "18 inches",
                    explanation: "NFPA 13 (2022) requires a minimum distance of 18 inches between sprinklers and continuous obstructions less than 4 feet wide to ensure proper spray distribution.",
                    codeReference: "NFPA 13 (2022), Section 9.2.2.1",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Obstruction+Layout"
                },
                {
                    question: "What is the required signage for a fire department connection?",
                    options: ["FDC - Wet System", "FDC - Sprinkler System", "Fire Department Connection", "Sprinkler Connection"],
                    correctAnswer: "Fire Department Connection",
                    explanation: "NFPA 13 (2022) requires fire department connections to be marked with the sign 'Fire Department Connection' for clear identification.",
                    codeReference: "NFPA 13 (2022), Section 8.17.2.5",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable length of a flexible sprinkler hose assembly?",
                    options: ["4 feet", "6 feet", "8 feet", "10 feet"],
                    correctAnswer: "6 feet",
                    explanation: "NFPA 13 (2022) limits flexible sprinkler hose assemblies to a maximum length of 6 feet to ensure proper hydraulic performance.",
                    codeReference: "NFPA 13 (2022), Section 9.2.4.3",
                    exhibit: null
                },
                {
                    question: "What is the minimum clearance required above a control valve for maintenance access?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "24 inches",
                    explanation: "NFPA 13 (2022) requires a minimum clearance of 24 inches above control valves to allow for maintenance and operation.",
                    codeReference: "NFPA 13 (2022), Section 8.16.1.2",
                    exhibit: null
                },
                {
                    question: "What is the required flow rate for a system demand test in a light hazard occupancy?",
                    options: ["0.10 gpm/sq ft", "0.15 gpm/sq ft", "0.20 gpm/sq ft", "0.25 gpm/sq ft"],
                    correctAnswer: "0.15 gpm/sq ft",
                    explanation: "NFPA 13 (2022) specifies a minimum flow rate of 0.15 gpm per square foot for light hazard occupancies in system demand tests.",
                    codeReference: "NFPA 13 (2022), Section 19.3.3.1",
                    exhibit: null
                },
                {
                    question: "What is the minimum size for a drain valve in a wet pipe sprinkler system?",
                    options: ["1/2 inch", "3/4 inch", "1 inch", "2 inches"],
                    correctAnswer: "2 inches",
                    explanation: "NFPA 13 (2022) requires drain valves in wet pipe systems to be at least 2 inches to ensure adequate drainage capacity.",
                    codeReference: "NFPA 13 (2022), Section 8.16.2.4",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a piping layout. What is the minimum distance between a sprinkler and a vertical obstruction like a column?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "18 inches",
                    explanation: "NFPA 13 (2022) requires sprinklers to be at least 18 inches from vertical obstructions like columns to avoid spray pattern interference.",
                    codeReference: "NFPA 13 (2022), Section 9.2.3.1",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Piping+Layout"
                },
                {
                    question: "What is the required material for underground piping in a sprinkler system?",
                    options: ["PVC", "Ductile iron", "Copper", "Galvanized steel"],
                    correctAnswer: "Ductile iron",
                    explanation: "NFPA 13 (2022) specifies ductile iron as an approved material for underground piping due to its strength and corrosion resistance.",
                    codeReference: "NFPA 13 (2022), Section 10.3.1.1",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable pressure loss for a backflow preventer in a sprinkler system?",
                    options: ["5 psi", "10 psi", "15 psi", "20 psi"],
                    correctAnswer: "10 psi",
                    explanation: "NFPA 13 (2022) limits the pressure loss through a backflow preventer to 10 psi to ensure adequate system performance.",
                    codeReference: "NFPA 13 (2022), Section 8.16.3.2",
                    exhibit: null
                },
                {
                    question: "What is the minimum number of sprinklers required for a hydraulic calculation in a light hazard occupancy?",
                    options: ["5 sprinklers", "10 sprinklers", "15 sprinklers", "20 sprinklers"],
                    correctAnswer: "15 sprinklers",
                    explanation: "NFPA 13 (2022) requires hydraulic calculations to include at least 15 sprinklers in light hazard occupancies to determine system demand.",
                    codeReference: "NFPA 13 (2022), Section 19.3.2.1",
                    exhibit: null
                },
                {
                    question: "What is the required location for a main drain valve in a sprinkler system?",
                    options: ["At the highest point", "At the lowest point", "Near the fire department connection", "Near the water supply"],
                    correctAnswer: "At the lowest point",
                    explanation: "NFPA 13 (2022) requires the main drain valve to be located at the lowest point of the system to ensure complete drainage.",
                    codeReference: "NFPA 13 (2022), Section 8.16.2.3",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable distance between sprinklers and a ceiling pocket in a light hazard occupancy?",
                    options: ["3 feet", "4 feet", "5 feet", "6 feet"],
                    correctAnswer: "4 feet",
                    explanation: "NFPA 13 (2022) limits the distance between sprinklers and ceiling pockets to 4 feet in light hazard occupancies to ensure proper activation.",
                    codeReference: "NFPA 13 (2022), Section 9.2.5.1",
                    exhibit: null
                },
                {
                    question: "What is the required marking for sprinkler system control valves?",
                    options: ["Valve Open", "Sprinkler Control", "Fire Valve", "Control Valve"],
                    correctAnswer: "Control Valve",
                    explanation: "NFPA 13 (2022) requires control valves to be marked 'Control Valve' for clear identification.",
                    codeReference: "NFPA 13 (2022), Section 8.16.1.4",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a sprinkler layout. What is the minimum distance between sprinklers and a light fixture?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "36 inches",
                    explanation: "NFPA 13 (2022) requires sprinklers to be at least 36 inches from light fixtures to prevent heat interference with sprinkler activation.",
                    codeReference: "NFPA 13 (2022), Section 9.2.4.2",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Sprinkler+Fixture+Layout"
                },
                {
                    question: "What is the minimum size for a water supply test connection?",
                    options: ["1 inch", "1.5 inches", "2 inches", "2.5 inches"],
                    correctAnswer: "2 inches",
                    explanation: "NFPA 13 (2022) requires water supply test connections to be at least 2 inches to ensure accurate flow testing.",
                    codeReference: "NFPA 13 (2022), Section 8.17.4.2",
                    exhibit: null
                },
                {
                    question: "What is the required protection for sprinkler system piping exposed to freezing temperatures?",
                    options: ["Insulation", "Heat tracing", "Dry pipe system", "Antifreeze system"],
                    correctAnswer: "Dry pipe system",
                    explanation: "NFPA 13 (2022) recommends a dry pipe system for sprinkler piping exposed to freezing temperatures to prevent water freezing in the pipes.",
                    codeReference: "NFPA 13 (2022), Section 8.2.1",
                    exhibit: null
                },
                {
                    question: "What is the maximum allowable distance between a sprinkler and a partition in a light hazard occupancy?",
                    options: ["4 feet", "6 feet", "7.5 feet", "9 feet"],
                    correctAnswer: "7.5 feet",
                    explanation: "NFPA 13 (2022) allows a maximum distance of 7.5 feet between a sprinkler and a partition in light hazard occupancies, based on half the allowable spacing.",
                    codeReference: "NFPA 13 (2022), Section 10.2.5.2.2",
                    exhibit: null
                },
                {
                    question: "What is the required clearance around a fire department connection for accessibility?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "36 inches",
                    explanation: "NFPA 13 (2022) requires a minimum clearance of 36 inches around fire department connections to ensure accessibility for firefighters.",
                    codeReference: "NFPA 13 (2022), Section 8.17.2.6",
                    exhibit: null
                },
                {
                    question: "What is the minimum number of control valves required for a sprinkler system with multiple risers?",
                    options: ["One per riser", "One per floor", "One per zone", "One per system"],
                    correctAnswer: "One per riser",
                    explanation: "NFPA 13 (2022) requires at least one control valve per riser to allow isolation of individual system sections.",
                    codeReference: "NFPA 13 (2022), Section 8.16.1.1",
                    exhibit: null
                },
                {
                    question: "What is the required color coding for sprinkler heads with a nominal temperature rating of 250-300°F?",
                    options: ["Orange", "Red", "Yellow", "Blue"],
                    correctAnswer: "Blue",
                    explanation: "NFPA 13 (2022) specifies that sprinkler heads with a temperature rating of 250-300°F must be color-coded blue for identification.",
                    codeReference: "NFPA 13 (2022), Section 7.2.4.3",
                    exhibit: null
                },
                {
                    question: "Refer to the exhibit for a sprinkler layout. What is the minimum distance between sprinklers and a soffit in a light hazard occupancy?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "18 inches",
                    explanation: "NFPA 13 (2022) requires sprinklers to be at least 18 inches from soffits to ensure proper spray pattern distribution.",
                    codeReference: "NFPA 13 (2022), Section 9.2.4.1",
                    exhibit: "https://via.placeholder.com/300x200.png?text=Soffit+Layout"
                },
                {
                    question: "What is the minimum size for a riser in a wet pipe sprinkler system serving up to 500 sprinklers?",
                    options: ["2 inches", "3 inches", "4 inches", "6 inches"],
                    correctAnswer: "4 inches",
                    explanation: "NFPA 13 (2022) requires risers in wet pipe systems serving up to 500 sprinklers to be at least 4 inches to ensure adequate water flow.",
                    codeReference: "NFPA 13 (2022), Section 8.16.4.1",
                    exhibit: null
                },
                {
                    question: "What is the required testing frequency for a waterflow alarm in a sprinkler system?",
                    options: ["Monthly", "Quarterly", "Semiannually", "Annually"],
                    correctAnswer: "Quarterly",
                    explanation: "NFPA 13 (2022) requires waterflow alarms to be tested quarterly to ensure proper operation.",
                    codeReference: "NFPA 13 (2022), Section 8.17.4.3",
                    exhibit: null
                },
                {
                    question: "What is the minimum clearance required below a sidewall sprinkler in a light hazard occupancy?",
                    options: ["12 inches", "18 inches", "24 inches", "36 inches"],
                    correctAnswer: "18 inches",
                    explanation: "NFPA 13 (2022) requires a minimum clearance of 18 inches below sidewall sprinklers in light hazard occupancies to ensure proper spray distribution.",
                    codeReference: "NFPA 13 (2022), Section 10.3.4.3",
                    exhibit: null
                },
                {
                    question: "What is the required protection for sprinkler system piping in a corrosive environment?",
                    options: ["Galvanized coating", "Stainless steel", "Copper tubing", "Corrosion-resistant paint"],
                    correctAnswer: "Galvanized coating",
                    explanation: "NFPA 13 (2022) recommends galvanized coating for sprinkler piping in corrosive environments to prevent rust and degradation.",
                    codeReference: "NFPA 13 (2022), Section 9.1.1.2",
                    exhibit: null
                },
                {
                    question: "What is the minimum number of spare sprinklers required for a system with 800 sprinklers of the same type?",
                    options: ["6", "12", "18", "24"],
                    correctAnswer: "18",
                    explanation: "NFPA 13 (2022) requires at least 18 spare sprinklers for systems with 300 to 1000 sprinklers of the same type and temperature rating.",
                    codeReference: "NFPA 13 (2022), Section 7.5.2.1",
                    exhibit: null
                }
            ];

            let currentQuestion = 0;
            let answers = new Array(questions.length).fill(null);
            let score = 0;

            const startScreen = document.getElementById('start-screen');
            const quizScreen = document.getElementById('quiz-screen');
            const resultsScreen = document.getElementById('results-screen');
            const startQuizBtn = document.getElementById('start-quiz');
            const prevQuestionBtn = document.getElementById('prev-question');
            const nextQuestionBtn = document.getElementById('next-question');
            const showExhibitBtn = document.getElementById('show-exhibit');
            const exhibitDiv = document.getElementById('exhibit');
            const exhibitImage = document.getElementById('exhibit-image');
            const restartQuizBtn = document.getElementById('restart-quiz');

            function showQuestion(index) {
                try {
                    const q = questions[index];
                    document.getElementById('question-number').textContent = index + 1;
                    document.getElementById('question-text').textContent = q.question;
                    const optionsDiv = document.getElementById('options');
                    optionsDiv.innerHTML = '';
                    q.options.forEach((option, i) => {
                        const label = document.createElement('label');
                        label.className = 'block';
                        label.innerHTML = `
                            <input type="radio" name="answer" value="${option}" ${answers[index] === option ? 'checked' : ''}>
                            ${option}
                        `;
                        optionsDiv.appendChild(label);
                    });

                    if (q.exhibit) {
                        showExhibitBtn.classList.remove('hidden');
                        exhibitImage.src = q.exhibit;
                    } else {
                        showExhibitBtn.classList.add('hidden');
                        exhibitDiv.classList.add('hidden');
                    }

                    prevQuestionBtn.disabled = index === 0;
                    nextQuestionBtn.textContent = index === questions.length - 1 ? 'Submit Quiz' : 'Next';
                } catch (error) {
                    console.error('Error in showQuestion:', error);
                }
            }

            function calculateResults() {
                try {
                    score = 0;
                    answers.forEach((answer, i) => {
                        if (answer === questions[i].correctAnswer) score++;
                    });

                    const resultsDiv = document.getElementById('results');
                    resultsDiv.innerHTML = '';
                    questions.forEach((q, i) => {
                        const result = document.createElement('div');
                        result.className = 'border-b py-2';
                        result.innerHTML = `
                            <p><strong>Question ${i + 1}:</strong> ${q.question}</p>
                            <p><strong>Your Answer:</strong> ${answers[i] || 'Not answered'}</p>
                            <p><strong>Correct Answer:</strong> ${q.correctAnswer}</p>
                            <p><strong>Explanation:</strong> ${q.explanation}</p>
                            <p><strong>Code Reference:</strong> ${q.codeReference}</p>
                        `;
                        resultsDiv.appendChild(result);
                    });

                    document.getElementById('score').textContent = `You scored ${score} out of ${questions.length} (${((score / questions.length) * 100).toFixed(2)}%)`;
                } catch (error) {
                    console.error('Error in calculateResults:', error);
                }
            }

            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', () => {
                    try {
                        console.log('Start Quiz button clicked');
                        startScreen.classList.add('hidden');
                        quizScreen.classList.remove('hidden');
                        showQuestion(currentQuestion);
                    } catch (error) {
                        console.error('Error in startQuizBtn click:', error);
                    }
                });
            } else {
                console.error('startQuizBtn not found in DOM');
            }

            if (prevQuestionBtn) {
                prevQuestionBtn.addEventListener('click', () => {
                    try {
                        const selected = document.querySelector('input[name="answer"]:checked');
                        if (selected) answers[currentQuestion] = selected.value;
                        currentQuestion--;
                        showQuestion(currentQuestion);
                    } catch (error) {
                        console.error('Error in prevQuestionBtn click:', error);
                    }
                });
            } else {
                console.error('prevQuestionBtn not found in DOM');
            }

            if (nextQuestionBtn) {
                nextQuestionBtn.addEventListener('click', () => {
                    try {
                        const selected = document.querySelector('input[name="answer"]:checked');
                        if (selected) answers[currentQuestion] = selected.value;
                        currentQuestion++;
                        if (currentQuestion < questions.length) {
                            showQuestion(currentQuestion);
                        } else {
                            quizScreen.classList.add('hidden');
                            resultsScreen.classList.remove('hidden');
                            calculateResults();
                        }
                    } catch (error) {
                        console.error('Error in nextQuestionBtn click:', error);
                    }
                });
            } else {
                console.error('nextQuestionBtn not found in DOM');
            }

            if (showExhibitBtn) {
                showExhibitBtn.addEventListener('click', () => {
                    try {
                        exhibitDiv.classList.toggle('hidden');
                    } catch (error) {
                        console.error('Error in showExhibitBtn click:', error);
                    }
                });
            } else {
                console.error('showExhibitBtn not found in DOM');
            }

            if (restartQuizBtn) {
                restartQuizBtn.addEventListener('click', () => {
                    try {
                        resultsScreen.classList.add('hidden');
                        startScreen.classList.remove('hidden');
                        currentQuestion = 0;
                        answers.fill(null);
                        score = 0;
                    } catch (error) {
                        console.error('Error in restartQuizBtn click:', error);
                    }
                });
            } else {
                console.error('restartQuizBtn not found in DOM');
            }
        });
    </script>
</body>
</html>
